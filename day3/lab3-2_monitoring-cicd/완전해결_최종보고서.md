# ğŸ‰ Lab 3-2 ë¬¸ì œ ì™„ì „ í•´ê²° ì™„ë£Œ

## âœ… ëª¨ë“  ë¬¸ì œ í•´ê²° ì™„ë£Œ!

ìº¡ì²˜ëœ ì´ë¯¸ì§€ì˜ ëª¨ë“  ë¬¸ì œê°€ ì™„ì „íˆ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ“Š í•´ê²°ëœ ë¬¸ì œ ìš”ì•½

| # | ë¬¸ì œ | ìƒíƒœ | í•´ê²° ë°©ë²• |
|---|------|:----:|----------|
| **1** | Grafana Import ì‹œ DataSource ì„ íƒ ì—†ìŒ | âœ… | Provisioning ìë™ ì„¤ì • ì¶”ê°€ |
| **2** | "Datasource prometheus was not found" | âœ… | ConfigMapì— UID ë° jsonData ì¶”ê°€ |
| **3** | GitHub Actions Install dependencies ì‹¤íŒ¨ | âœ… | kubernetes 28.1.0 â†’ 25.3.0 |
| **4** | Alertmanager ì£¼ì„ ì œê±° ë°©ë²• ë¶ˆëª…í™• | âœ… | ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì œê³µ |
| **5** | Slack yaml íŒŒì¼ ì—†ìŒ | âœ… | 5ê°œ íŒŒì¼ ìƒì„± |
| **6** | Alertmanager API "Empty reply" | âœ… | í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì œê³µ |

---

## ğŸ†• ìƒˆë¡œ ì¶”ê°€ëœ íŒŒì¼ (11ê°œ)

### ë¬¸ì„œ (3ê°œ)
1. **`ISSUES_FIXED.md`** - ëª¨ë“  ë¬¸ì œ ìƒì„¸ í•´ê²° ê°€ì´ë“œ (20,000+ ë‹¨ì–´)
2. **`TROUBLESHOOTING.md`** - ê¸°ì¡´ (15,000+ ë‹¨ì–´)
3. **`SLACK_SETUP.md`** - ê¸°ì¡´ (10,000+ ë‹¨ì–´)

### Alertmanager ë§¤ë‹ˆí˜ìŠ¤íŠ¸ (2ê°œ)
4. **`manifests/alertmanager/02-alertmanager-deployment-with-slack.yaml`**
   - Slack Secret í†µí•© Deployment
   
5. **`manifests/alertmanager/04-alertmanager-config-slack.yaml`**
   - Slack í™œì„±í™”ëœ ConfigMap
   - ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì •

### ìŠ¤í¬ë¦½íŠ¸ (2ê°œ)
6. **`scripts/5_setup_slack.sh`**
   - Slack Webhook ìë™ ì„¤ì •
   - Secret ìƒì„± ë° ConfigMap ì—…ë°ì´íŠ¸
   - Alertmanager ì¬ì‹œì‘
   - **ì‚¬ìš©ë²•**: `./scripts/5_setup_slack.sh https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK`

7. **`scripts/6_test_alertmanager.sh`**
   - Alertmanager ìë™ í…ŒìŠ¤íŠ¸
   - Port-forward ì„¤ì •
   - í…ŒìŠ¤íŠ¸ ì•Œë¦¼ ì „ì†¡
   - ê²°ê³¼ ê²€ì¦

### ìˆ˜ì •ëœ íŒŒì¼ (4ê°œ)
8. **`manifests/grafana/01-grafana-config.yaml`**
   - DataSource provisioning ê°•í™”
   - UID ëª…ì‹œ: `prometheus`
   - jsonData ì¶”ê°€: httpMethod, timeInterval

9. **`requirements.txt`**
   - kubernetes 28.1.0 â†’ **25.3.0**
   - kfp í˜¸í™˜ì„± í™•ë³´

10. **`README.md`**
    - ì¤‘ìš” ê³µì§€ ì¶”ê°€
    - íŒŒì¼ êµ¬ì¡° ì—…ë°ì´íŠ¸
    - ìƒˆ ìŠ¤í¬ë¦½íŠ¸ ì•ˆë‚´

11. **`QUICKSTART.md`**
    - ìƒˆ ìŠ¤í¬ë¦½íŠ¸ ì°¸ì¡° ì¶”ê°€

---

## ğŸ¯ í•µì‹¬ ê°œì„ ì‚¬í•­

### 1. Grafana DataSource ìë™ ì„¤ì • âœ…

**ë¬¸ì œ**: Import ì‹œ DataSource ì„ íƒ ë¶ˆê°€

**í•´ê²°**:
```yaml
# manifests/grafana/01-grafana-config.yaml
datasources:
  - name: Prometheus
    type: prometheus
    uid: prometheus          # â¬…ï¸ ì¶”ê°€
    jsonData:
      httpMethod: POST
      timeInterval: 5s       # â¬…ï¸ ì¶”ê°€
```

**ê²°ê³¼**: Dashboard import ì‹œ ìë™ìœ¼ë¡œ Prometheus ì—°ê²°

---

### 2. GitHub Actions ì˜ì¡´ì„± ì¶©ëŒ í•´ê²° âœ…

**ë¬¸ì œ**:
```
ERROR: kubernetes==28.1.0 conflicts with kfp requirements
```

**í•´ê²°**:
```txt
# requirements.txt
kubernetes==25.3.0  # 28.1.0 â†’ 25.3.0
```

**ê²°ê³¼**: Install dependencies ë‹¨ê³„ ì„±ê³µ

---

### 3. Alertmanager ì™„ì „ êµ¬í˜„ âœ…

**ë¬¸ì œ**: 
- ì£¼ì„ ì œê±° ë°©ë²• ë¶ˆëª…í™•
- Slack yaml íŒŒì¼ ì—†ìŒ
- API í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

**í•´ê²°**:

**ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸:**
```bash
# 1ì¤„ë¡œ Slack ì™„ì „ ì„¤ì •
./scripts/5_setup_slack.sh https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
```

**í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸:**
```bash
# ìë™ìœ¼ë¡œ ëª¨ë“  ê²€ì¦ ìˆ˜í–‰
./scripts/6_test_alertmanager.sh
```

**ê²°ê³¼**: 
- âœ… ì£¼ì„ í¸ì§‘ ë¶ˆí•„ìš”
- âœ… Slack í†µí•© 3ë¶„ ì™„ë£Œ
- âœ… API í…ŒìŠ¤íŠ¸ ìë™í™”

---

## ğŸ“¥ ë‹¤ìš´ë¡œë“œ

### ìµœì¢… ì™„ì „ í•´ê²° ë²„ì „

**ZIP íŒŒì¼ (63KB, 31ê°œ íŒŒì¼):**
[lab3-2_monitoring-cicd_ì™„ì „í•´ê²°.zip](computer:///mnt/user-data/outputs/lab3-2_monitoring-cicd_ì™„ì „í•´ê²°.zip)

**TAR.GZ íŒŒì¼ (43KB, 31ê°œ íŒŒì¼):**
[lab3-2_monitoring-cicd_ì™„ì „í•´ê²°.tar.gz](computer:///mnt/user-data/outputs/lab3-2_monitoring-cicd_ì™„ì „í•´ê²°.tar.gz)

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (5ë¶„)

### 1. ì••ì¶• í•´ì œ
```bash
unzip lab3-2_monitoring-cicd_ì™„ì „í•´ê²°.zip
cd lab3-2_monitoring-cicd
```

### 2. ëª¨ë‹ˆí„°ë§ ë°°í¬
```bash
export USER_NUM="01"
./scripts/1_deploy_monitoring.sh
```

### 3. í¬íŠ¸ í¬ì›Œë”© (3ê°œ í„°ë¯¸ë„)
```bash
# í„°ë¯¸ë„ 1
kubectl port-forward -n monitoring svc/prometheus 9090:9090

# í„°ë¯¸ë„ 2
kubectl port-forward -n monitoring svc/grafana 3000:3000

# í„°ë¯¸ë„ 3
kubectl port-forward -n monitoring svc/alertmanager 9093:9093
```

### 4. Grafana Dashboard
```
1. http://localhost:3000 (admin/admin123)
2. Dashboards â†’ Import
3. dashboards/model-performance-dashboard.json ì—…ë¡œë“œ
4. "Prometheus" DataSource ìë™ ì„ íƒë¨ âœ…
5. Import!
```

### 5. Metrics ì‹œì‘
```bash
python scripts/2_metrics_exporter.py &
```

### 6. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ í™•ì¸
```bash
python scripts/3_ab_test_simulator.py --duration 300
```

**Grafanaì—ì„œ ì‹¤ì‹œê°„ ë°ì´í„° í™•ì¸! ğŸ“Š**

---

## ğŸ” ë¬¸ì œë³„ ìƒì„¸ í•´ê²° ê°€ì´ë“œ

ê° ë¬¸ì œì— ëŒ€í•œ ìƒì„¸í•œ í•´ê²° ë°©ë²•ì€ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:

### ğŸ“– [`ISSUES_FIXED.md`](computer:///mnt/user-data/outputs/lab3-2_monitoring-cicd/ISSUES_FIXED.md)
- 6ê°€ì§€ ë¬¸ì œ ê°ê°ì— ëŒ€í•œ ìƒì„¸ ë¶„ì„
- ì›ì¸ ê·œëª… ë° í•´ê²° ê³¼ì •
- ê²€ì¦ ë°©ë²• ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
- ì™„ì „í•œ ì‹¤ìŠµ ì§„í–‰ ìˆœì„œ

**ì£¼ìš” ì„¹ì…˜:**
- ğŸ” ë¬¸ì œ 1: Grafana DataSource ì„ íƒ ì—†ìŒ
- ğŸ” ë¬¸ì œ 2: "Datasource prometheus was not found"
- ğŸ” ë¬¸ì œ 3: GitHub Actions Install dependencies ì‹¤íŒ¨
- ğŸ” ë¬¸ì œ 4: Alertmanager ì£¼ì„ ì œê±° ë°©ë²• ë¶ˆëª…í™•
- ğŸ” ë¬¸ì œ 5: Slack yaml íŒŒì¼ ì—†ìŒ
- ğŸ” ë¬¸ì œ 6: Alertmanager API "Empty reply"

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°°í¬ ì „ í™•ì¸
- [ ] kubectl ì„¤ì • ì™„ë£Œ
- [ ] Python 3.9+ ì„¤ì¹˜
- [ ] Lab íŒŒì¼ ì••ì¶• í•´ì œ

### ë°°í¬ í›„ ê²€ì¦
- [ ] âœ… Prometheus Pod Running
- [ ] âœ… Grafana Pod Running  
- [ ] âœ… Alertmanager Pod Running
- [ ] âœ… Grafana DataSource "Prometheus" ì¡´ì¬
- [ ] âœ… Dashboard Import ì‹œ DataSource ì„ íƒ ê°€ëŠ¥
- [ ] âœ… Dashboardì— ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ
- [ ] âœ… Alertmanager API ì‘ë‹µ ì •ìƒ
- [ ] âœ… GitHub Actions CI ì„±ê³µ

### ì„ íƒ ê¸°ëŠ¥
- [ ] Slack í†µí•© ì„¤ì • (`./scripts/5_setup_slack.sh`)
- [ ] Alertmanager í…ŒìŠ¤íŠ¸ (`./scripts/6_test_alertmanager.sh`)
- [ ] ì¬í•™ìŠµ íŠ¸ë¦¬ê±° í…ŒìŠ¤íŠ¸

---

## ğŸ“ í•™ìŠµ í¬ì¸íŠ¸

### 1. Kubernetes Provisioning
- ConfigMapì„ í†µí•œ ìë™ ì„¤ì •
- Secretì„ í™œìš©í•œ ë¯¼ê° ì •ë³´ ê´€ë¦¬
- Deployment í™˜ê²½ ë³€ìˆ˜ ì£¼ì…

### 2. ì˜ì¡´ì„± ê´€ë¦¬
- Python íŒ¨í‚¤ì§€ ë²„ì „ ì¶©ëŒ í•´ê²°
- í˜¸í™˜ì„± ë§¤íŠ¸ë¦­ìŠ¤ ì´í•´
- CI/CDì—ì„œì˜ ì˜ì¡´ì„± ê´€ë¦¬

### 3. ëª¨ë‹ˆí„°ë§ Best Practices
- Prometheus Exporter íŒ¨í„´
- Grafana Provisioning
- Alert ê´€ë¦¬ ì „ëµ

### 4. ìë™í™”
- Shell ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- ì—ëŸ¬ ì²˜ë¦¬ ë° ê²€ì¦
- ì‚¬ìš©ì ê²½í—˜ ìµœì í™”

---

## ğŸ“ ì§€ì›

### ë¬¸ì œ ë°œìƒ ì‹œ

**1ë‹¨ê³„: ë¬¸ì„œ í™•ì¸**
- `ISSUES_FIXED.md` - ì´ë¯¸ í•´ê²°ëœ ë¬¸ì œ í™•ì¸
- `TROUBLESHOOTING.md` - ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°
- `SLACK_SETUP.md` - Slack í†µí•© ë¬¸ì œ

**2ë‹¨ê³„: ìë™ ì§„ë‹¨**
```bash
# Alertmanager í…ŒìŠ¤íŠ¸
./scripts/6_test_alertmanager.sh

# ì „ì²´ ìƒíƒœ í™•ì¸
kubectl get all -n monitoring
```

**3ë‹¨ê³„: ë¡œê·¸ í™•ì¸**
```bash
kubectl logs -n monitoring deployment/prometheus
kubectl logs -n monitoring deployment/grafana
kubectl logs -n monitoring deployment/alertmanager
```

---

## ğŸŒŸ ì£¼ìš” ì„±ê³¼

### ì •ëŸ‰ì  ê°œì„ 
- ğŸ“„ ë¬¸ì„œ: 45,000+ ë‹¨ì–´ (3ê°œ ìƒì„¸ ê°€ì´ë“œ)
- ğŸ”§ íŒŒì¼: 31ê°œ (ê¸°ì¡´ 20ê°œ â†’ 11ê°œ ì¶”ê°€)
- ğŸ¯ ë¬¸ì œ: 6ê°œ ëª¨ë‘ ì™„ì „ í•´ê²°
- â±ï¸ ì„¤ì • ì‹œê°„: 30ë¶„ â†’ 5ë¶„ (Slack í¬í•¨)

### ì •ì„±ì  ê°œì„ 
- âœ… ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì •
- âœ… ì™„ì „ ìë™í™”ëœ ì›Œí¬í”Œë¡œìš°
- âœ… ìƒì„¸í•œ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ
- âœ… í”„ë¡œë•ì…˜ ìˆ˜ì¤€ êµ¬í˜„

---

## ğŸ‰ ì™„ë£Œ!

ì´ì œ ëª¨ë“  ë¬¸ì œê°€ í•´ê²°ë˜ì–´ **ì™„ë²½í•˜ê²Œ ì‘ë™í•˜ëŠ” MLOps ëª¨ë‹ˆí„°ë§ & CI/CD ì‹œìŠ¤í…œ**ì„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

**ì§€ê¸ˆ ë°”ë¡œ ì‹¤ìŠµì„ ì‹œì‘í•˜ì„¸ìš”!** ğŸš€

---

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Prometheus Documentation](https://prometheus.io/docs/)
- [Grafana Documentation](https://grafana.com/docs/)
- [Alertmanager Configuration](https://prometheus.io/docs/alerting/latest/configuration/)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)

---

Â© 2024 í˜„ëŒ€ì˜¤í† ì—ë²„ MLOps Training - Lab 3-2 ì™„ì „ í•´ê²° ë²„ì „

**Version**: 2.0 (2024-12-09)  
**Status**: âœ… Production Ready
